# 모바일 웹-Viewport
- 데스크톱 브라우저와 모바일 브라우저 사이의 개념차이가 있음. 
- 뷰포트 개념과 메타 태그를 사용하는 선언 방법을 알아야 함. 
- 업무 중 특정 단말에서 발생한 해상도 이슈 및 모바일웹에 대한 배경 지식을 위한 학습.  
  

## 1.1 뷰포트
- (데스크탑 브라우저 용도인)일반 웹페이지를 모바일에서 실행하게 되면 화면 구조나 글씨체가 바뀌는 차이가 발생한다. 
- viewport는 보여지는 창문이라는 뜻으로 '화면 요소가 보여지는 영역'을 말함. 
- 같은 html5 문서가 실행장치에 따라 다르게 보이는 주된 이유는 **각 장치의 뷰포트 적용 방식이 다르기 때문.**

#### 레이아웃 뷰포트(layout viewport)
- 장치의 전체 화면 해상도에 해당하는 영역
- 현재 보여지는 브라우저 창의 크기와 관련 없음

#### 비주얼 뷰포트(layout viewport)
- 전체 페이중 현재 화면에 보이는 영역
- 비주얼 뷰포트의 크기는 레이아웃 뷰포트보다 클 수 없기 때문에, 레이아웃 뷰포트의 크기 즉, 전체 화면의 해상도에 맞게 글자 표시를 한다. 
  * 데스크탑 브라우저 창을 확대하거나 축소할 경우, 크기에 따라 보여지는 내용이 제한될 뿐, 항상 글자 크기가 같은 이유.. 
  
#### 뷰포트 크기 
- 스마트폰은 모바일 브라우저 창의 크기가 화면 최대 크기로 고정된다. 
- 결과적으로 비주얼 뷰포트와 레이아웃 뷰포트 크기가 항상 같음
- 모바일 환경에서도 데스크톱 환경처럼 웹 페이지 전체를 자연스럽게 브라우징 할 수 있도록 풀브라우징(full-browsing)을 지원함. 
- 모바일 환경에선, 작은 화면에 웹 페이지를 모두 표시하기 위해 전체적인 배율 조정을 통한 축소가 이루어진다.
- 문제는 각 스마트폰 브라우저 별로 아래 표 처럼 실제보다 훨씬 큰 크기의 뷰 포트가 설정되어 있고 이를 기준으로 글자 크기를 표시.. 
- 모바일 브라우저는 모바일에 최적화되지 않은 페이지도 모두 보일 수 있도록 기본 뷰포트를 크게 설정 함. 
   
| 스마트폰(브라우저)유형  | 뷰포트 기본 너비(width) |
|---|---|
| 안드로이드(웹킷)  | 980px  |
|  아이폰(사파리) |  980px |
|  윈도우폰(인터넷익스플로러) | 974px  |

  
## 1.2 뷰포트 메타 태그 
- <meta> 태그는 브라우저에게 웹 페이지 관련 부가적인 정보를 제공하는 태그. 
- 특히, 모바일 페이지를 작성할 경우에는 meta 태그를 이용하여 뷰포트 정보를 제공해야 한다. 
- 페이지가 표시되는 모바일 장치는 화면 크기와 해상도가 다양하고 pc 화면크기에 비해 매우 작음. 
  * 뷰포트를 제공하지 않으면 모바일 브라우저는 pc화면과 비슷한 해상도로 표시되므로 인식하기 어려울 정도로 작은 글씨로 표시된다. 이를 해결하기 위해 뷰포트를 사용해야 한다. 


#### 1.2.1 뷰포트 메타 태그 속성
    
| 뷰포트 속성  | 속성값(Ex)  | 의미  |
|---|---|---|
| width  | 480px, 720px device-width  |  화면(뷰포트)의 너비(200~10,000px) |
| initial-scale  | 1.0  | 초기 화면 확대 비율(0~10.0) |
| minimum-scale  | 0.5 | 화면 축소 최소 비율(0~10.0)  |
| maximum-scale  | 2.0  |  화면 확대 최대 비율(0~10.0) |

- device-width 같은 속성들은 **모바일 장치의 실제 화면 크기를 기준으로** 뷰포트의 너비나 높이를 설정한다. 
- 보통 height 속성값은(테이블에는 적지 않음) width를 기준으로 자동설정 되어 별도로 설정할 필요가 없다. 
  

* 참고
  * idollive에서 설정한 viewport metatag설정(ios에서 해상도 이슈가 있었던..)
      
  ```
  <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0"
    />
  ```
#### 당시 문제
- 반응형 웹이라, 일단 가변적으로 native에서 padding값을 받는다.
- index.html의 스크립트 태그내 설정 및 메타 태그 설정으로, viewport값은 고정으로 해상도가 340이하일 경우 initial-scale를 0.9로 조정하였다. 
- 브라우저에서 이리저리 조정해보면 아이폰-네이티브에서 계산해서 주는 548px이라는 padding값과 webui상의 meta viewport값이 잘 안맞아서 웹뷰가 위로 더 끌려져 올라가는게 보였다. 
- 그래서, 네이티브 쪽에서 padding을 계산하여 다시 웹뷰를 내려가게 하였다. 
  


