# 리팩토링4-데이터 호출과 UX

## UX를 고려한 데이터 호출 시점
#### [ 데이터 호출 시점 ]
#### 1. 라우터 네비게이션 가드 
  * 특정 URL로 접근하기 전의 동작을 정의하는 속성(함수) 
  * 2 번보다 먼저 호출 됨. 
  * (ex) beforeEnter 
  - 스피너를 통해 스피너 뜨는 중 => 데이터 안보임, 스피너 끝남 => 데이터 보이겠구나. 예상 가능. 


#### 2. 컴포넌트 라이프 사이클 훅 
   * created : (컴포넌트가 생성)되자 마자 호출되는 로직
   - 프로젝트 샘플에서 계속 사용하던 방식 

- 위의 두가지 방식에 따른 사용자 ux고려  
 * 어느 시점에 호출할 지는 정책 시점에 따라 결정 
  

#### 라이프 사이클 훅을 이용한 데이터 호출 방법의 문제와 비동기 처리 코드 수정 
* network탭 => thro.. => 3g설정
- 이전 화면이 떠 있음 (1:00) 
- 특정 store에서 상태를 공유했을 경우 해당 문제점이 발생할 수 있음  (프로젝트의 list같은 경우) 
- mixin쪽 하면서 데이터 비동기 처리시 return 이 안됨 
  * actions내 return이 빠져서 promise chaining이 잘 안됨.. 

- 인스턴스니까 this.route, this~ 가능 

- `api.then(res => { consoloe.log(res) })` vs `api.then({data} => console.log(data))` 의 차이 

#### 라우터 네비게이션 가드 실습 및 스피너 종료 시점
- 내 pc에서는 확인이 잘 안되지만, 데이터 호출이 완료된 이후에도 스피너가 돌고 있음. 
- mounted에 스피너나 로딩바를 넣어서 데이터가 불러와진 다음에 event를 끄는 식으로 구현할 수 있다. 
  

#### 정리 및 추가 고려 사항
- 라우터 네비게이션 가드는..  라우팅 하는 중에 사용자에게 인지할 수 있는(데이터 호출시.. 좀만 기다려 주세요) 스피너나 프로그래스 바.. 같은 처리가 더 필요하다. 
- 아래처럼 선택 가능하다. 
 * (1) 일단 페이지 이동 후 보이게
 * (2) 페이지 이동 중 보이게 


